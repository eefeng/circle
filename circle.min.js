"use strict";var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||false;s.configurable=true;if("value"in s)s.writable=true;Object.defineProperty(e,s.key,s)}}return function(t,i,s){if(i)e(t.prototype,i);if(s)e(t,s);return t}}();function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var Circle=function(){function e(t,i){_classCallCheck(this,e);this.$ele=t;this.DEFAULTS={inner:90};this.opts=$.extend({},this.DEFAULTS,i);this.degs=[];this.skews=[];this.rotate1=[];this.rotate2=[];this.inner=this.opts.inner;this.colors=["#f36f6f","#20d2af","#a2c449","#75a6d1","#036f6f","#80d2af","#92c449","#15a6d1","#03654f","#08d2af","#92c449","#19a8d1"];this.init()}_createClass(e,[{key:"init",value:function e(){this.initPiesInfo(this.opts.pies);this.initPiesInfo(this.opts.pies);this.initPiesInfo(this.opts.pies);this.drawPies(this.piesInfo)}},{key:"clearInner",value:function e(){var t=this.inner;this.$ele.find("ul li a").each(function(e,i){$(i).css("background","radial-gradient(transparent "+t/Math.sqrt(2)+"%,"+$(i).css("background-color")+" "+t/Math.sqrt(2)+"%)")})}},{key:"initPiesInfo",value:function e(t){t.map(function(e,i){if(e.percentage>25){t.splice(i,0,{percentage:e.percentage-25,color:e.color});e.percentage=25}});this.piesInfo=this.opts.pies}},{key:"updatePercentage",value:function e(t,i){var s=i-this.piesInfo[t].percentage;this.piesInfo[t].percentage=i;this.piesInfo[t+1].percentage=this.piesInfo[t+1].percentage-s;this.clearPies();this.drawPies(this.piesInfo)}},{key:"clearPies",value:function e(){this.$ele.find("ul").empty();this.degs=[];this.skews=[];this.rotate1=[];this.rotate2=[]}},{key:"drawPies",value:function e(t){var i=this;this.inner=this.opts.inner;t.map(function(e,t){i.degs.push(e.percentage*360/100);i.skews.push(90-i.degs[t]);i.rotate1.push(90-i.degs[t]/2);var s=0;for(var n=0;n<t;n++){s+=i.degs[n]}i.rotate2.push(s);var a=$("<a></a>").css({transform:"skew(-"+i.skews[t]+"deg) rotate(-"+i.rotate1[t]+"deg) scale(1)",background:e.color});var r=$("<li></li>").css("transform","rotate("+i.rotate2[t]+"deg) skew("+i.skews[t]+"deg)").append(a);i.$ele.find("ul").append(r)});this.clearInner()}},{key:"divideInto",value:function e(t){this.clearPies();var i=[];console.log(100/t);for(var s=0;s<t;s++){i.push({color:this.colors[s],percentage:100/t})}this.initPiesInfo(i);this.initPiesInfo(i);this.initPiesInfo(i);this.drawPies(i);this.piesInfo=i}},{key:"collectPies",value:function e(){var t=Object.assign({},this.piesInfo);for(var i=0;i<t.length-1;i++){if(t[i].color===t[i+1].color){t[i+1].percentage+=t[i].percentage;t.splice(i,1)}}}},{key:"saveInfo",value:function e(){this.collectPies();console.log(this.piesInfo)}}]);return e}();